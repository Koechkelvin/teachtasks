<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
</head>
<body>
    <style>
        body {
            background-color: rgb(133, 119, 215);
        }
        .search1 {
            text-align: center;
            justify-content: center;
        }
        .input {
            height: 25px;
        }
        .user{
            display: grid;
        }
       
    </style>
    
    <div class="main">
        <div class="search1">
            <h1>GITHUB SEARCH TOOL</h1>
            <div class="input">
                <input type="search" id="search" name="search">
                <button id="searchButton">Search Query</button>
            </div>
        </div>
    </div>
    <div class="user">
        <img src="" alt="image" id="image">
        <h2 id="name">kelvin koech</h2>
        <h2 id="repos">repos</h2>
        <h2 id="location">location</h2>
        <h2 id="bio">bio</h2>
    </div>

    <script>
        const btn = document.getElementById('searchButton');
        const textinput = document.getElementById('search');
        const url = 'https://api.github.com/users/';
        
        btn.addEventListener('click', () => {
            getQuery();
        });

        function getQuery() {
            const query = textinput.value;
            alert(`You queried: ${query}`);
            fetchData(query)
                .then(data => {
                    alert(JSON.stringify(data));
                    populateData(data);
                })
                .catch(err => {
                    alert(`Could not fetch data because: ${err}`);
                });
        }

        const fetchData = async (query) => {
            try {
                const responsePromise = await fetch(url + query);
                return responsePromise.json();
            } catch (error) {
                throw error;
            }
        };

        function populateData(data) {
            const image = document.getElementById('image');
            const name = document.getElementById('name');
            const repos = document.getElementById('repos');
            const location = document.getElementById('location');
            const bio = document.getElementById('bio');

            image.src = data.avatar_url;
            name.textContent = data.name;
            repos.textContent = data.public_repos;
            location.textContent = data.location;
            bio.textContent = data.bio;
        }
    </script>
</body>
</html>
